<!--对应于shop_with_type.html，在显示优惠信息下的情况-->

{% extends 'shop/shops_with_type.html' %}
{% block dis_type_return %}
    <a href="{% url 'shop:shop_with_type' shop_type.pk %}?page={{page}}">返回</a>
{% endblock %}
{% block dis_with_type %}
    <!-- 判断店铺是否有优惠信息，有则显示，没有则返回‘暂无优惠’-->
    <script>
        var dis_num = 0;
    </script>
    {% for discount in discounts %}
        {% if discount.shop.name == shop.name %}
            <b style="font-size: 15px;color: darkseagreen">{{ discount.body|truncatechars:10|linebreaksbr }}</b>
            <!-- 统计每个店铺的优惠信息数量 -->
            <script>
                dis_num++;
            </script>
        {% endif %}
    {% endfor %}
    <i style="font-size: 15px; color: orangered ">
        <script>
            if (dis_num == 0)
            document.write('暂无优惠')
        </script>
    </i>
{% endblock %}